<!DOCTYPE html>
<html lang="en" class="history">
   <head>
      <meta name="robots" content="nofollow">
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--%lua%
print("      <link rel=\"stylesheet\" type=\"text/css\" href=\"" .. serverUrl .. "/files/jquery.tooltip.css\">\n")
print("      <script type=\"text/javascript\" src=\"" .. serverUrl .. "/files/jquery-1.4.4.min.js\"></script>\n")
print("      <script type=\"text/javascript\" src=\"" .. serverUrl .. "/files/jquery.tooltip-1.3.pack.js\"></script>\n")
print("      <script type=\"text/javascript\" src=\"" .. serverUrl .. "/files/utils.js\"></script>\n")
print("      <link rel=\"stylesheet\" type=\"text/css\" media=\"all\" title=\"Default\" href=\"" .. serverUrl .. "/files/new-style.css\">\n")
%lua%-->
   </head>
    <script>
    function clearForm() {
      document.getElementById('full-search').value = '';
      document.getElementById('regexp-filter').value = '';
      document.getElementById('project').selectedIndex = -1;
    }
    document.projects = [  ];document.xrefPath = '/folders?project=';document.domReady.push(function() { domReadyMenu(); });
  </script>

   <body>

 <!-- Link no topo -->
  <div class="link-bar">
    <a href="#"></a>
  </div>

  <!-- Linha laranja -->
  <div class="top-line"></div>

  <!-- FormulÃ¡rio -->
  <form method="GET" action="/search">
    <div class="container">
      <!-- Lado esquerdo -->
      <div class="left-side">
        <div class="form-title">Search</div>
        <div class="form-row">
          <label for="full-search">Full Search:</label>
<!--%lua%
print("          <input type=\"text\" id=\"full-search\" name=\"full_search\" value=\"" .. fullTextQuery .. "\">\n")
%lua%-->

        </div>
        <div class="form-row">
          <label for="regexp-filter">Regexp filter:</label>
<!--%lua%
local function isempty(s)
  return s == nil or s == ''
end
if (not isempty(regexpTextQuery)) then
  print("          <input type=\"text\" id=\"regexp-filter\" name=\"regexp_filter\" value=\"" .. regexpTextQuery .. "\">\n")
else
  print("          <input type=\"text\" id=\"regexp-filter\" name=\"regexp_filter\">\n")
end
%lua%-->
        </div>
        <div class="button-row">
          <button type="submit">Search</button>
          <button type="button" onclick="clearForm()">Clear</button>
        </div>
      </div>
      <!-- Lado direito -->
      <div class="right-side">
        <div class="form-title">In Project</div>
        <select id="project" name="project" size="5" ondblclick="javascript: goFirstProject();">
<!--%lua%
for k, v in pairs(projects) do 
  if (project == k) then
    print("          <option value=\"" .. k .. "\" selected=\"selected\">" .. k .. "</option>\n")
  else
    print("          <option value=\"" .. k .. "\"\"  >" .. k .. "</option>\n")
  end
end 
%lua%-->
        </select>
      </div>
    </div>
  </form>

<div style="margin-top: 20px; font-family: sans-serif; color: #000; padding: 0 20px;">
  <label style="display: block; margin-bottom: 8px; color: #ececec;">Full search:</label>
<!--%lua%
if searchInfo then
  local isLineOdd = true
  for i = 1, #searchInfo do
    local si = searchInfo[i]
    local SearchFile = si.files
    print(" <table class=\"tabela-principal\">\n")
    print("    <tr class=\"cabecalho\">\n")
    print("      <th colspan=\"2\"><a href=\"" .. serverUrl .. "/folders?project=" .. project .. "&path=" .. si.path .. "\">" .. si.path .. "</a></th>\n")
    print("    </tr>\n")
    print("    <tbody>\n")

    for j = 1, #SearchFile do
      local sf = SearchFile[j]
    if (isLineOdd) then
      print("      <tr class=\"linha-impar\">\n")
    else
      print("      <tr class=\"linha-par\">\n")
    end
      print("        <td class=\"celula-arquivo\"><a href=\"" .. serverUrl .. "/files?project=" .. project .. "&path=" .. si.path .. sf.name .. "\">" .. sf.name .. "</a></td>\n")
      print("        <td class=\"conteudo-dados\">\n")
      print("          <table class=\"subtabela\">\n")
      local SeachLine = sf.lines
      for k = 1, #SeachLine do
        local sl = SeachLine[k]
        print("            <tr class=\"sublinha\"><td class=\"subcelula\"> <span class=\"numero\">".. sl.line .."</span><a href=\"" .. serverUrl .. "/files?project=" .. project .. "&path=" .. si.path .. sf.name .."&line=" .. sl.line .. "\"> " .. sl.excerpt .. "</a></td></tr>\n")
      end
      print("          </table>          </td>\n")
      print("        </tr>\n")
          if (isLineOdd) then
      isLineOdd = false
    else
      isLineOdd = true
    end
    end
    

    print("    </tbody>\n")
    print("  </table>\n")    
  end
end
%lua%-->
  


  </div>
 </body>
</html>

