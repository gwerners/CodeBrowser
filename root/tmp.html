<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Hierarchy</title>
    <style>
        ul {
            list-style-type: none;
            padding-left: 20px;
        }
        li {
            margin: 5px 0;
            position: relative;
        }
        .expand-collapse {
            cursor: pointer;
            display: inline-block;
            width: 20px;
            text-align: center;
            margin-right: 5px;
        }
        .expanded::before {
            content: "-";
        }
        .collapsed::before {
            content: "+";
        }
        .close-button {
            color: red;
            cursor: pointer;
            display: inline-block;
            margin-left: 10px;
        }
        .close-button:hover {
            color: darkred;
        }
    </style>
</head>
<body>
    <button id="showHierarchy">Show Call Hierarchy</button>
    <div id="overlay" style="display: none;">
        <div id="hierarchyList"></div>
        <span class="close-button" id="closeOverlay">X</span>
    </div>

    <script>
        const jsonData = {
            "name": "main",
            "calls": [
                {
                    "name": "functionA",
                    "calls": [
                        {
                            "name": "functionB",
                            "calls": []
                        }
                    ]
                },
                {
                    "name": "functionC",
                    "calls": []
                }
            ]
        };

        function createHierarchyList(data) {
            const ul = document.createElement('ul');

            data.calls.forEach(call => {
                const li = document.createElement('li');

                const expandCollapse = document.createElement('span');
                expandCollapse.className = 'expand-collapse collapsed';
                expandCollapse.addEventListener('click', (e) => {
                    const ulChild = e.target.nextElementSibling;
                    if (ulChild.style.display === 'none') {
                        ulChild.style.display = 'block';
                        e.target.className = 'expand-collapse expanded';
                    } else {
                        ulChild.style.display = 'none';
                        e.target.className = 'expand-collapse collapsed';
                    }
                });

                const textNode = document.createTextNode(call.name);

                li.appendChild(expandCollapse);
                li.appendChild(textNode);

                if (call.calls.length > 0) {
                    const childUl = createHierarchyList(call);
                    childUl.style.display = 'none';
                    li.appendChild(childUl);
                }

                ul.appendChild(li);
            });

            return ul;
        }

        document.getElementById('showHierarchy').addEventListener('click', () => {
            const overlay = document.getElementById('overlay');
            const hierarchyList = document.getElementById('hierarchyList');
            hierarchyList.innerHTML = ''; // Clear previous content
            hierarchyList.appendChild(createHierarchyList(jsonData));
            overlay.style.display = 'block';
        });

        document.getElementById('closeOverlay').addEventListener('click', () => {
            document.getElementById('overlay').style.display = 'none';
        });
    </script>
</body>
<
