<!DOCTYPE html>
<html lang="en" class="history">
   <head>
      <meta name="robots" content="nofollow">
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--%lua%
print("      <link rel=\"stylesheet\" type=\"text/css\" media=\"all\" title=\"Default\" href=\"" .. serverUrl .. "/files/style.css\">\n")
print("      <link rel=\"stylesheet\" type=\"text/css\" href=\"" .. serverUrl .. "/files/jquery.tooltip.css\">\n")
print("      <link rel=\"search\" href=\"" .. serverUrl .. "/opensearch\" type=\"application/opensearchdescription+xml\" title=\"OpenGrok Search for current project(s)\">\n")
print("      <script type=\"text/javascript\" src=\"" .. serverUrl .. "/files/jquery-1.4.4.min.js\"></script>\n")
print("      <script type=\"text/javascript\" src=\"" .. serverUrl .. "/files/jquery.tooltip-1.3.pack.js\"></script>\n")
print("      <script type=\"text/javascript\" src=\"" .. serverUrl .. "/files/utils.js\"></script>\n")

%lua%-->   

   </head>
   <body>
      <script type="text/javascript">/* <![CDATA[ */
         document.hash = 'null';document.rev = '';document.link = '/folders?project=';document.annotate = false;
         document.domReady.push(function() {domReadyMast();});
         document.pageReady.push(function() { pageReadyMast();});
         /* ]]> */
      </script>
      <div id="page">
         <div id="whole_header">
            <form action="/search">
               <div id="header">
 
               </div>
               <div id="Masthead">
<!--%lua%
if  path == nil or path == '' then
  print("                  <tt><a href=\"" .. serverUrl .. "/folders?project=" .. project .. "\"></a></tt>\n")
else
  print("                  <tt><a href=\"" .. serverUrl .. "/folders?project=" .. project .. "&path=" .. path .. "\">" .. project .. "/" .. path .. "</a>/</tt>\n")
end
%lua%-->  
               </div>
               <div id="bar">
                  <ul>
<!--%lua%
print("                     <li><a href=\"" .. serverUrl .. "\"><span id=\"home\"></span>Home</a></li>\n")
print("                     <li><a href=\"" .. serverUrl .. "/history?project=" .. project .. "&path=" .. path .. "\">History</a></li>\n")
%lua%-->   
                     <li>
                        <input type="text" id="search" name="q" class="q">
                        <input type="submit" value="Search" class="submit">
                     </li>
                     <li>
<!--%lua%
print("                        <input type=\"checkbox\" name=\"path\" value=\"/" .. project .. "/\"> only in <b>/" .. project .. "/</b>\n")
%lua%-->
                     </li>
                  </ul>
<!--%lua%
print("                  <input type=\"hidden\" name=\"project\" value=\"" .. project .. "\">\n")
%lua%-->
               </div>
            </form>
         </div>
         <div id="content" style="top: 858.45px; bottom: 0px;">
            <script type="text/javascript">/* <![CDATA[ */
               document.pageReady.push(function() { pageReadyList();});
               /* ]]> */
            </script>
<!--%lua%
if  upperPath == nil or upperPath == '' then
  print("            <p><a href=\"" .. serverUrl .. "/folders?project=" .. project .. "\"><i>Up to higher level directory</i></a></p>\n")
else
  print("            <p><a href=\""  .. serverUrl ..  "/folders?project=" .. project .. "&path=" .. upperPath .. "\"><i>Up to higher level directory</i></a></p>\n")
end
%lua%--> 
            <table id="dirlist">
               <thead>
                  <tr>
                     <th></th>
                     <th>Name</th>
                     <th>Date</th>
                     <th>Size</th>
                     <th>Type</th>
                  </tr>
               </thead>
               <tbody>
<!--%lua%
local files_info = get_file_info()
for _, file_info in ipairs(files_info) do
  print("                  <tr>\n")
  print("                     <td>\n")
  print("                        <p class=\"p\"></p>\n")
  print("                     </td>\n")
  if  file_info.path == nil or file_info.path == '' then
  print("                     <td><a href=\"" .. serverUrl .. "/" .. file_info.type .. "?project=" .. project .. "&path=" .. file_info.name .. "\">" .. file_info.name .. "</a></td>\n")
  else
    print("                     <td><a href=\"" .. serverUrl .. "/" .. file_info.type .. "?project=" .. project .. "&path=" .. file_info.path .. "/" .. file_info.name .. "\">" .. file_info.name .. "</a></td>\n")
  end
  print("                     <td>" .. file_info.access_date .."</td>\n")
  print("                     <td>" .. file_info.size .. "</td>\n")
  if file_info.isDir == true then
    print("                     <td>Directory</td>\n")
  else
    print("                     <td>File</td>\n")
  end
  print("                  </tr>\n")
end
%lua%-->         
               </tbody>
            </table>
            <div id="footer">
<!--%lua%
print("               <p><a href=\"" .. githubUrl .. "\" title=\"Served by " .. serverName .. "\"><span id=\"fti\"></span></a></p>\n")
print("               <div><img src=\"" .. serverUrl .. "/files/1.gif\" style=\"position:absolute; left:-9999px;\" alt=\"\"></div>\n")
print("               <p>Indexes created " .. indexCreationTime .. "</p>\n")
%lua%-->
            </div>
         </div>
      </div>
   </body>
</html>
